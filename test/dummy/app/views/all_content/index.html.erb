<main class="container all-content-index">
  <h1>All Content</h1>

  <% if @posts.any? %>
    <div class="posts">
      <% @posts.each do |post| %>
        <article class="post-preview">
          <h2>
            <%# Collections link to canonical PostType URLs %>
            <%= link_to post.title, send("#{post.post_type.name.singularize}_path", post.slug) %>
          </h2>

          <div class="post-meta">
            <% if post.published_at %>
              <time datetime="<%= post.published_at.iso8601 %>">
                <%= post.published_at.strftime("%B %d, %Y") %>
              </time>
            <% end %>

            <% if post.reading_time %>
              <span>&nbsp;•&nbsp;</span>
              <span class="reading-time">
                <%= post.reading_time %> min read
              </span>
            <% end %>
          </div>

          <% if post.content.present? %>
            <div class="post-excerpt">
              <%= truncate(post.content, length: 200) %>
            </div>
          <% end %>
        </article>
      <% end %>
    </div>

    <% if @pagination[:total_pages] > 1 %>
      <section class="pagination">
        <% if @pagination[:prev_page] %>
          <%= link_to "← Previous", all_content_path(page: @pagination[:current_page] - 1), class: "pagination-prev" %>
        <% end %>

        <span class="pagination-info">
          Page <%= @pagination[:current_page] %> of <%= @pagination[:total_pages] %>
        </span>

        <% if @pagination[:next_page] %>
          <%= link_to "Next →", all_content_path(page: @pagination[:current_page] + 1), class: "pagination-next" %>
        <% end %>
      </section>
    <% end %>
  <% else %>
    <p class="no-posts">No all content posts yet.</p>
  <% end %>
</main>
