# frozen_string_literal: true

class Avo::Actions::PublishPost < Avo::BaseAction
  self.name = "Publish"
  self.visible = -> { record.status != "published" }
  self.message = "Are you sure you want to publish this post?"
  self.confirm_button_label = "Publish"

  def handle(**args)
    args[:records].each do |post|
      post.update(status: "published")
    end

    succeed "Post(s) published successfully!"
  end
end
